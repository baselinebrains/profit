<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BaselineBrains Profit / Loss</title>
  <meta name="description" content="BaselineBrains Tennis Tipster - Transparent Profit and Loss Tracking.">
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css"/>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <img src="logo.png" alt="BaselineBrains Logo" class="logo" />
  <h1>BaselineBrains Profit / Loss</h1>

  <p id="lastUpdated"></p>

  <h2>Dashboard</h2>
  <div class="table-container">
    <table class="dataTable">
      <thead id="dashboardHead"></thead>
      <tbody id="dashboardBody"></tbody>
    </table>
  </div>

  <!-- Profit Trend section removed -->

  <h2>Tips Log</h2>
  <div class="table-container">
    <table id="tipsTable" class="dataTable">
      <thead id="tipsHead"></thead>
      <tbody id="tipsBody"></tbody>
    </table>
  </div>

  <footer>
    BaselineBrains © 2025 — All Rights Reserved. |
    <a href="https://x.com/BaselineBrains" target="_blank">@BaselineBrains on X</a><br>
    <small>Results shown are for transparency. Past performance is not a guarantee of future results. Gamble responsibly.</small>
  </footer>

  <script>
    function buildTablePapa(csvUrl, headId, bodyId, isDashboard) {
      Papa.parse(csvUrl, {
        download: true,
        header: false,
        complete: function(results) {

      // ✅ Initialize DataTables only for Tips Log
      if (bodyId === 'tipsBody') {
        $('#tipsTable').DataTable({
          "pageLength": 25
        });
      }
          const rows = results.data;
          const tableHead = document.getElementById(headId);
          const tableBody = document.getElementById(bodyId);

          if (rows.length > 0) {
            let headerRow = '<tr>';
            rows[0].forEach(cell => {
              headerRow += '<th>' + cell + '</th>';
            });
            headerRow += '</tr>';
            tableHead.innerHTML = headerRow;
          }

          for (let i = 1; i < rows.length; i++) {
            if (rows[i].every(cell => cell.trim() === "" || cell.trim() === '"')) continue;
            let rowHtml = '<tr>';
            rows[i].forEach((cell, colIndex) => {
              let className = "";
              let icon = "";
              if (colIndex === 5) {
                if (cell.toLowerCase().includes("win")) { className = "win"; icon = "✅ "; }
                else if (cell.toLowerCase().includes("loss")) { className = "loss"; icon = "❌ "; }
                else if (cell.toLowerCase().includes("void")) { className = "void"; icon = "➖ "; }
              }
              rowHtml += '<td class="' + className + '">' + icon + cell + '</td>';
            });
            rowHtml += '</tr>';
            tableBody.innerHTML += rowHtml;
          }

          document.getElementById('lastUpdated').innerText = 'Last updated: ' + new Date().toLocaleString();

          if (!isDashboard) {
            $('#tipsTable').DataTable();
          }
        },
        error: function(err) {
          console.error('PapaParse error:', err);
        }
      });
    }

    buildTablePapa("https://docs.google.com/spreadsheets/d/e/2PACX-1vR1SqB34ONUqDxXRd6w8vc2VqpaumUypOxIuK-4sTQ6zCr6MHFP-2VsICOr5ILqzg/pub?gid=1265439786&single=true&output=csv", "dashboardHead", "dashboardBody", false);
    buildTablePapa("https://docs.google.com/spreadsheets/d/e/2PACX-1vR1SqB34ONUqDxXRd6w8vc2VqpaumUypOxIuK-4sTQ6zCr6MHFP-2VsICOr5ILqzg/pub?gid=1251556089&single=true&output=csv", "tipsHead", "tipsBody", false);
  </script>

  <script>
    
  </script>
</body>

</html>